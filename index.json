{
  "app": "CarPlayer",
  "version": "2.1",
  "fecha": "2025-11-16",
  "html": "<!DOCTYPE html><html lang=\"es\"><head><meta charset=\"utf-8\"><title>CarPlayer - Tu Reproductor</title><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\"><style>:root{--accent:#000;--bg:#000;--btn:#222;--text:#fff;--panel-bg:#111;}*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,Arial;color:var(--text);}body{background:var(--bg);height:100vh;display:flex;flex-direction:column;overflow:hidden;}#top{flex:1;display:flex;gap:.5rem;padding:.5rem;min-height:0;}@media (orientation: portrait){.panel:first-child{display:none;}#top{flex-direction:column;}#center{flex:1 1 100%;max-width:100%;min-width:0;}#bottom button{font-size:4vh;height:10vh;}}.panel{flex:1;display:flex;flex-direction:column;background:var(--panel-bg);border-radius:1vh;overflow:hidden;min-height:0;position:relative;}video{width:100%;flex:1;background:#000;outline:0;min-height:0;object-fit:cover;transition:none !important;}#center{background:#0005;border-radius:1vh;padding:1vh;display:flex;flex-direction:column;gap:1vh;overflow-y:auto;flex:0 0 40%;overflow-x:hidden;}.track{display:flex;align-items:center;gap:1vh;padding:1vh;background:var(--btn);border-radius:1vh;cursor:pointer;height:10vh;flex-shrink:0;max-width:100%;}.track img{height:100%;aspect-ratio:16/9;object-fit:cover;border-radius:1vh;max-width:20%;}.track-info{flex:1;display:flex;flex-direction:column;gap:0.5vh;min-width:0;overflow:hidden;}.track-title{font-size:3.5vh;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.track-genre{font-size:2.5vh;color:var(--accent);opacity:0.8;}.track.active{background:var(--accent);color:#fff;border:3px solid #fff;transform:scale(1.02);}#bottom{display:flex;align-items:center;gap:1vh;padding:1vh;background:#0005;flex-shrink:0;}button{flex:1;height:12vh;border:none;border-radius:1.5vh;background:var(--btn);color:var(--text);font-weight:700;font-size:5vh;cursor:pointer;}#progress{height:3vh;background:#444;border-radius:1.5vh;cursor:pointer;margin:0 1vh;flex-shrink:0;}#bar{height:100%;background:var(--accent);border-radius:1.5vh;width:0%;}#safeDrive{display:flex;align-items:center;gap:1vh;padding:1vh;font-size:3vh;}#safeDrive input{width:4vh;height:4vh;}#filters{display:flex;gap:1vh;padding:1vh;background:#0005;flex-wrap:wrap;flex-shrink:0;max-height:15vh;overflow-y:auto;}.filter-btn{background:var(--btn);color:var(--text);border:none;padding:1vh 2vh;border-radius:1vh;cursor:pointer;font-size:2.5vh;}.filter-btn.active{background:var(--accent);}</style></head><body><div id=\"top\"><div class=\"panel\"><video id=\"vP\" muted playsinline></video></div><div id=\"center\"></div></div><div id=\"filters\"><button class=\"filter-btn active\" data-genre=\"all\">Todos</button></div><div id=\"progress\"><div id=\"bar\"></div></div><div id=\"bottom\"><button id=\"prev\">‚èÆ</button><button id=\"play\">‚ñ∂</button><button id=\"next\">‚è≠</button><button id=\"toggleMute\">üîá</button></div><div id=\"safeDrive\"><input type=\"checkbox\" id=\"driving\"><label for=\"driving\">Conduciendo (solo audio)</label></div><script>const vP=document.getElementById('vP');const bar=document.getElementById('bar');const center=document.getElementById('center');const drivingChk=document.getElementById('driving');const filtersContainer=document.getElementById('filters');let PLAYLIST=[];let FILTERED_PLAYLIST=[];let idx=parseInt(localStorage.getItem('carIdx')||0);let isMuted=localStorage.getItem('carMuted')==='true';let currentGenre='all';const GENRE_FOLDERS={'Latinoamericana':[{name:'Latinoamericana',url:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Aya.c/refs/heads/main/jsskkkk.json'}],'„Åä„Çì„Åå„Åè':[{name:'Èü≥Ê•Ω',url:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Jp.n/refs/heads/main/jpn.json'}]};async function loadAllMusic(){PLAYLIST=[];for(const[g,folders]of Object.entries(GENRE_FOLDERS)){for(const f of folders){try{const r=await fetch(f.url);const d=await r.json();const songs=d.map((item,i)=>({title:item.nombre||item.name||item.title||'Canci√≥n '+(i+1),video:item.url||item.video||'',thumb:item.thumb||'https://picsum.photos/320/180?random='+i,genre:g,folder:f.name}));PLAYLIST.push(...songs);}catch{}}}FILTERED_PLAYLIST=[...PLAYLIST];init();}function renderList(){center.innerHTML='';FILTERED_PLAYLIST.forEach((tr,i)=>{const d=document.createElement('div');d.className='track'+(i===idx?' active':'');d.innerHTML='<img src=\"'+tr.thumb+'\"><div class=\"track-info\"><div class=\"track-title\">'+tr.title+'</div><div class=\"track-genre\">'+tr.genre+' ‚Ä¢ '+tr.folder+'</div></div>';d.onclick=()=>loadTrack(i);center.appendChild(d);});}function loadTrack(i){idx=i;const item=FILTERED_PLAYLIST[idx];if(!item)return;vP.src=item.video;vP.play();renderList();localStorage.setItem('carIdx',idx);}function nextTrack(){loadTrack((idx+1)%FILTERED_PLAYLIST.length);}function prevTrack(){loadTrack((idx-1+FILTERED_PLAYLIST.length)%FILTERED_PLAYLIST.length);}function filterByGenre(g){currentGenre=g;FILTERED_PLAYLIST=g==='all'?[...PLAYLIST]:PLAYLIST.filter(t=>t.genre===g);document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.dataset.genre===g));idx=0;renderList();loadTrack(idx);}function createGenreFilters(){document.querySelectorAll('.filter-btn')[0].onclick=()=>filterByGenre('all');[...new Set(PLAYLIST.map(t=>t.genre))].forEach(g=>{const b=document.createElement('button');b.className='filter-btn';b.dataset.genre=g;b.textContent=g;b.onclick=()=>filterByGenre(g);filtersContainer.appendChild(b);});}function updateDriveMode(){document.body.classList.toggle('audio-only',drivingChk.checked);}function toggleMute(){isMuted=!isMuted;vP.muted=isMuted;localStorage.setItem('carMuted',isMuted);document.getElementById('toggleMute').textContent=isMuted?'üîá':'üîä';}function init(){createGenreFilters();filterByGenre('all');if(FILTERED_PLAYLIST.length>0)loadTrack(idx);vP.muted=isMuted;document.getElementById('toggleMute').textContent=isMuted?'üîá':'üîä';}document.getElementById('play').onclick=()=>{vP.paused?vP.play():vP.pause();};document.getElementById('next').onclick=nextTrack;document.getElementById('prev').onclick=prevTrack;document.getElementById('toggleMute').onclick=toggleMute;drivingChk.onchange=updateDriveMode;vP.ontimeupdate=()=>{if(vP.duration)bar.style.width=(100*vP.currentTime/vP.duration)+'%';};vP.onended=nextTrack;loadAllMusic();</script></body></html>"
}
