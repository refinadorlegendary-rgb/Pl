{
  "app": "CarPlayer",
  "version": "2.1",
  "fecha": "2025-11-16",
  "html": "<!DOCTYPE html><html lang=\"es\"><head><meta charset=\"utf-8\"><title>CarPlayer - Tu Reproductor</title><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\"><script>class TurboBoost{static cacheDir='cache/';static init(){if(!this.cacheDirExists())this.createCacheDir();if(!ob_start('ob_gzhandler'))ob_start();const cacheFile=this.cacheDir+md5(window.location.href)+'.html';if(this.fileExists(cacheFile)&&(Date.now()-this.fileMtime(cacheFile))<3600000){document.write(this.readFile(cacheFile));throw new Error('CACHE_HIT');}ob_start([this,'optimizeOutput']);}static optimizeOutput(html){html=html.replace(/\\>[^\\S ]+/s,'>').replace(/[^\\S ]+\\</s,'<').replace(/(\\s)+/s,'\\1');html=html.replace(/<img([^>]+)>/g,'<img$1 loading=\"lazy\">');html=html.replace(/<script([^>]*)(?<!defer)>/g,'<script$1 defer>');const cacheFile=this.cacheDir+md5(window.location.href)+'.html';this.writeFile(cacheFile,html);return html;}static cacheDirExists(){return false;}static createCacheDir(){return true;}static fileExists(){return false;}static fileMtime(){return Date.now();}static readFile(){return'';}static writeFile(){return true;}}function md5(str){return btoa(str).replace(/[^a-z0-9]/gi,'').substring(0,16);}TurboBoost.init();</script><style>@media (orientation:portrait){body::before{content:\"\";display:none;}#top{flex-direction:column;}.panel:first-child{display:none;}#center{flex:1 1 100%;max-width:100%;min-width:0;}#bottom button{font-size:4vh;height:10vh;}}:root{--accent:#000;--bg:#000;--btn:#222;--text:#fff;--panel-bg:#111;}*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,Arial;color:var(--text);}body{background:var(--bg);height:100vh;display:flex;flex-direction:column;overflow:hidden;}#top{flex:1;display:flex;gap:.5rem;padding:.5rem;min-height:0;}.panel{flex:1;display:flex;flex-direction:column;background:var(--panel-bg);border-radius:1vh;overflow:hidden;min-height:0;position:relative;}video{width:100%;flex:1;background:#000;outline:0;min-height:0;object-fit:cover;transition:none !important;}#center{background:#0005;border-radius:1vh;padding:1vh;display:flex;flex-direction:column;gap:1vh;overflow-y:auto;flex:0 0 40%;overflow-x:hidden;}.track{display:flex;align-items:center;gap:1vh;padding:1vh;background:var(--btn);border-radius:1vh;cursor:pointer;height:10vh;flex-shrink:0;max-width:100%;}.track img{height:100%;aspect-ratio:16/9;object-fit:cover;border-radius:1vh;max-width:20%;}.track-info{flex:1;display:flex;flex-direction:column;gap:0.5vh;min-width:0;overflow:hidden;}.track-title{font-size:3.5vh;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.track-genre{font-size:2.5vh;color:var(--accent);opacity:0.8;}.track.active{background:var(--accent);color:#fff;border:3px solid #fff;transform:scale(1.02);}#bottom{display:flex;align-items:center;gap:1vh;padding:1vh;background:#0005;flex-shrink:0;}button{flex:1;height:12vh;border:none;border-radius:1.5vh;background:var(--btn);color:var(--text);font-weight:700;font-size:5vh;cursor:pointer;}#progress{height:3vh;background:#444;border-radius:1.5vh;cursor:pointer;margin:0 1vh;flex-shrink:0;}#bar{height:100%;background:var(--accent);border-radius:1.5vh;width:0%;}#safeDrive{display:flex;align-items:center;gap:1vh;padding:1vh;font-size:3vh;}#safeDrive input{width:4vh;height:4vh;}#filters{display:flex;gap:1vh;padding:1vh;background:#0005;flex-wrap:wrap;flex-shrink:0;max-height:15vh;overflow-y:auto;}.filter-btn{background:var(--btn);color:var(--text);border:none;padding:1vh 2vh;border-radius:1vh;cursor:pointer;font-size:2.5vh;}.filter-btn.active{background:var(--accent);}#fullscreen-container{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000;z-index:10000;flex-direction:column;}#fullscreen-container.active{display:flex;}#fullscreen-video{width:100%;height:100%;background:#000;object-fit:contain;}#fullscreen-controls{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:10px;z-index:10001;background:rgba(0,0,0,0.8);padding:10px 15px;border-radius:10px;}#fullscreen-controls button{background:var(--accent);color:var(--text);border:none;padding:8px 12px;border-radius:5px;cursor:pointer;font-size:14px;}#loading{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.8);color:var(--accent);padding:20px;border-radius:10px;z-index:10002;display:none;}</style></head><body><div id=\"top\"><div class=\"panel\"><video id=\"vP\" muted playsinline></video></div><div id=\"center\"></div></div><div id=\"filters\"><button class=\"filter-btn active\" data-genre=\"all\">Todos</button></div><div id=\"progress\"><div id=\"bar\"></div></div><div id=\"bottom\"><button id=\"prev\">‚èÆ</button><button id=\"play\">‚ñ∂</button><button id=\"next\">‚è≠</button><button id=\"toggleMute\">üîá</button><button id=\"fullscreen\">‚õ∂</button></div><div id=\"safeDrive\"><input type=\"checkbox\" id=\"driving\"><label for=\"driving\">Conduciendo (solo audio)</label></div><div id=\"fullscreen-container\"><video id=\"fullscreen-video\" muted playsinline></video><div id=\"fullscreen-controls\"><button id=\"fs-prev\">‚èÆ</button><button id=\"fs-play\">‚ñ∂</button><button id=\"fs-next\">‚è≠</button><button id=\"fs-mute\">üîá</button><button id=\"fs-exit\">Salir</button></div></div><div id=\"loading\">Cargando m√∫sica...</div><script>const DataCache={set:(k,d)=>{try{localStorage.setItem('cache_'+k,JSON.stringify({d,t:Date.now()}));}catch{localStorage.clear();}},get:(k,a=3)=>{const c=localStorage.getItem('cache_'+k);if(!c)return null;const j=JSON.parse(c);if(Date.now()-j.t>a*60*60*1000){localStorage.removeItem('cache_'+k);return null;}return j.d;},clear:k=>localStorage.removeItem('cache_'+k)};</script><script type=\"module\">import{initializeApp}from\"https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js\";import{getDatabase,ref,set,onDisconnect}from\"https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js\";const cfg={apiKey:\"TU_API_KEY\",authDomain:\"TU_AUTH_DOMAIN\",databaseURL:\"https://music-76fda-default-rtdb.firebaseio.com/\",projectId:\"TU_PROJECT_ID\",storageBucket:\"TU_BUCKET.appspot.com\",messagingSenderId:\"TU_SENDER_ID\",appId:\"TU_APP_ID\"};const app=initializeApp(cfg);const db=getDatabase(app);const uid=\"u\"+Math.floor(Math.random()*1e6);const uref=ref(db,'usuariosActivos/'+uid);set(uref,{n:uid,c:true,l:Date.now()});onDisconnect(uref).remove();setInterval(()=>set(uref,{n:uid,c:true,l:Date.now()}),1e4);</script><script type=\"module\">import{initializeApp}from\"https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js\";import{getDatabase,ref,onValue}from\"https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js\";const cfg={apiKey:\"TU_API_KEY\",authDomain:\"TU_AUTH_DOMAIN\",databaseURL:\"https://music-76fda-default-rtdb.firebaseio.com/\",projectId:\"TU_PROJECT_ID\",storageBucket:\"TU_BUCKET.appspot.com\",messagingSenderId:\"TU_SENDER_ID\",appId:\"TU_APP_ID\"};const app=initializeApp(cfg);const db=getDatabase(app);const bref=ref(db,'bloqueoApp');let layer=document.getElementById('blockLayer');if(!layer){layer=document.createElement('div');layer.id='blockLayer';layer.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.97);color:#fff;font-size:2em;display:none;align-items:center;justify-content:center;z-index:999999;';layer.innerHTML='<span>üö´ App bloqueada<br>Mantenimiento</span>';document.body.appendChild(layer);}onValue(bref,s=>{const v=s.val();layer.style.display=v?'flex':'none';const medias=document.querySelectorAll('audio,video');medias.forEach(m=>v?m.pause():null);});setInterval(()=>{if(layer.style.display==='flex')document.querySelectorAll('audio,video').forEach(m=>m.pause());},1e3);</script><script>const vP=document.getElementById('vP');const fsV=document.getElementById('fullscreen-video');const bar=document.getElementById('bar');const center=document.getElementById('center');const drive=document.getElementById('driving');const fsC=document.getElementById('fullscreen-container');const filt=document.getElementById('filters');const load=document.getElementById('loading');let PLAYLIST=[];let FILTERED=[];let idx=parseInt(localStorage.getItem('carIdx')||0);let muted=localStorage.getItem('carMuted')==='true';let genre='all';let fs=false;const GENRE_FOLDERS={'Latinoamericana':[{n:'Latinoamericana',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Aya.c/refs/heads/main/jsskkkk.json'}],'„Åä„Çì„Åå„Åè':[{n:'Èü≥Ê•Ω',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Jp.n/refs/heads/main/jpn.json'}],'Baladas':[{n:'Baladas',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Bl./refs/heads/main/bsss.json'}],'Folclore':[{n:'Ayllus',u:'https://archive.org/download/xd_20251013/jssk.json'}],'Pop':[{n:'Divas',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Dip.o.p/refs/heads/main/jsskk.json'}],'Grupero':[{n:'Cumbias sure√±as',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Grp/refs/heads/main/jsskkk.json'}],'Rock en Espa√±ol':[{n:'Rock',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/rr/refs/heads/main/rc.json'}],'Bachata':[{n:'Bachata',u:'https://archive.org/download/vvvvvvvx/Bchvvc.json'}],'tecno':[{n:'Electr√≥nica Teckno',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Tcno/refs/heads/main/TcElec.json'}],'Salsa':[{n:'Salsa Cl√°sica',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Ccc/refs/heads/main/Sssss.json'}],'Boleros':[{n:'Cantineros',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Bo../refs/heads/main/Bol..json'}],'Ingles':[{n:'80',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Ringles/refs/heads/main/Ringles.json'}],'cumbias':[{n:'Cumbias de ayer y hoy',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/q./refs/heads/main/q...json'}],'Criolla':[{n:'Musica Criolla',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Crll/refs/heads/main/C.lla.json'}],'Disco':[{n:'Italo disco',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Dic..c/refs/heads/main/Idisco.json'}],'huaynos':[{n:'huaynos',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Hyns/refs/heads/main/hyn.json'}],'wwe':[{n:'Vintage (ingles)',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/w.3/refs/heads/main/w.w3.json'}],'Reguet√≥n':[{n:'Clasicos del Regueton',u:'https://raw.githubusercontent.com/refinadorlegendary-rgb/Rgmp/refs/heads/main/rgtnnns.json'}]};async function loadAll(){load.style.display='block';const cached=DataCache.get('full_pl');if(cached){PLAYLIST=cached;FILTERED=[...PLAYLIST];load.style.display='none';init();return;}PLAYLIST=[];for(const[g,folders]of Object.entries(GENRE_FOLDERS)){for(const f of folders){try{const r=await fetch(f.u);const d=await r.json();const songs=d.map((item,i)=>({title:item.nombre||item.name||item.title||'Canci√≥n '+(i+1),video:item.url||item.video||'',thumb:item.thumb||'https://picsum.photos/320/180?random='+i,genre:g,folder:f.n}));PLAYLIST.push(...songs);}catch{}}}DataCache.set('full_pl',PLAYLIST);FILTERED=[...PLAYLIST];load.style.display='none';init();}function render(){center.innerHTML='';FILTERED.forEach((tr,i)=>{const d=document.createElement('div');d.className='track'+(i===idx?' active':'');d.innerHTML='<img src=\"'+tr.thumb+'\" onerror=\"this.src=\\'https://picsum.photos/320/180?random='+i+'\\'\"><div class=\"track-info\"><div class=\"track-title\">'+tr.title+'</div><div class=\"track-genre\">'+tr.genre+' ‚Ä¢ '+tr.folder+'</div></div>';d.onclick=()=>loadTrack(i);center.appendChild(d);});setTimeout(()=>{const a=center.querySelector('.track.active');if(a)a.scrollIntoView({block:'center'});},100);}function loadTrack(i){idx=i;const item=FILTERED[idx];if(!item)return;const t=isFullscreen?fsV:vP;t.src=item.video;t.currentTime=0;t.play();render();localStorage.setItem('carIdx',idx);}function nextTrack(){loadTrack((idx+1)%FILTERED.length);}function prevTrack(){loadTrack((idx-1+FILTERED.length)%FILTERED.length);}function filterByGenre(g){genre=g;FILTERED=g==='all'?[...PLAYLIST]:PLAYLIST.filter(t=>t.genre===g);document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.dataset.genre===g));idx=0;render();loadTrack(idx);}function createFilters(){document.querySelectorAll('.filter-btn')[0].onclick=()=>filterByGenre('all');[...new Set(PLAYLIST.map(t=>t.genre))].forEach(g=>{const b=document.createElement('button');b.className='filter-btn';b.dataset.genre=g;b.textContent=g+' ('+PLAYLIST.filter(t=>t.genre===g).length+')';b.onclick=()=>filterByGenre(g);filt.appendChild(b);});}function updateDrive(){document.body.classList.toggle('audio-only',drive.checked);}function toggleMute(){muted=!muted;vP.muted=muted;fsV.muted=muted;localStorage.setItem('carMuted',muted);document.getElementById('toggleMute').textContent=muted?'üîá':'üîä';document.getElementById('fs-mute')&&(document.getElementById('fs-mute').textContent=muted?'üîá':'üîä');}function enterFS(){fs=true;fsV.currentTime=vP.currentTime;fsV.muted=vP.muted;vP.pause();fsC.classList.add('active');fsV.play().catch(()=>{});updateFSControls();}function exitFS(){fs=false;vP.currentTime=fsV.currentTime;fsV.pause();fsC.classList.remove('active');vP.play().catch(()=>{});updateFSControls();}function updateFSControls(){const btn=document.getElementById('fs-play');if(!btn)return;const cur=fs?fsV:vP;btn.textContent=cur.paused?'‚ñ∂':'‚óº';}document.getElementById('play').onclick=()=>{const cur=fs?fsV:vP;if(cur.paused){cur.play();document.getElementById('play').textContent='‚óº';}else{cur.pause();document.getElementById('play').textContent='‚ñ∂';}updateFSControls();};document.getElementById('next').onclick=nextTrack;document.getElementById('prev').onclick=prevTrack;document.getElementById('toggleMute').onclick=toggleMute;document.getElementById('fullscreen').onclick=enterFS;document.getElementById('fs-exit').onclick=exitFS;document.getElementById('fs-prev').onclick=prevTrack;document.getElementById('fs-next').onclick=nextTrack;document.getElementById('fs-play').onclick=()=>{const cur=fs?fsV:vP;if(cur.paused)cur.play();else cur.pause();updateFSControls();};document.getElementById('fs-mute').onclick=toggleMute;drive.onchange=updateDrive;document.getElementById('progress').onclick=e=>{const r=e.currentTarget.getBoundingClientRect();const p=(e.clientX-r.left)/r.width;const cur=fs?fsV:vP;if(cur.duration)cur.currentTime=p*cur.duration;};function setupEvents(el){el.onplay=()=>{document.getElementById('play').textContent='‚óº';updateFSControls();};el.onpause=()=>{document.getElementById('play').textContent='‚ñ∂';updateFSControls();};el.onended=nextTrack;el.ontimeupdate=()=>{if(el.duration)bar.style.width=(100*el.currentTime/el.duration)+'%';};}function init(){createFilters();filterByGenre('all');if(FILTERED.length>0)loadTrack(idx);vP.muted=muted;fsV.muted=muted;document.getElementById('toggleMute').textContent=muted?'üîá':'üîä';setupEvents(vP);setupEvents(fsV);}loadAll();</script></body></html>"
}
